<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WebP Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    .test-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
    .test-item { border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
    .test-item h3 { margin-top: 0; }
    .status { font-size: 18px; font-weight: bold; margin: 20px 0; }
    .green { color: green; }
    .red { color: red; }
  </style>
</head>
<body>
  <h1>üñºÔ∏è WebP Support Test - DEXRabbit</h1>
  
  <div id="webp-status" class="status">–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É WebP...</div>
  
  <h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤:</h2>
  <div class="test-grid">
    <div class="test-item">
      <h3>Vlad Avatar</h3>
      <picture>
        <source type="image/webp" srcset="assets/img/avatars/vlad.webp">
        <img src="assets/img/avatars/vlad.png" alt="Vlad" width="200" height="200" loading="lazy">
      </picture>
      <p>WebP: 38KB | PNG: 100KB</p>
    </div>
    
    <div class="test-item">
      <h3>Natalia Avatar</h3>
      <picture>
        <source type="image/webp" srcset="assets/img/avatars/natder.webp">
        <img src="assets/img/avatars/natder.jpg" alt="Natalia" width="200" height="200" loading="lazy">
      </picture>
      <p>WebP: 12KB | JPEG: 21KB</p>
    </div>
  </div>
  
  <h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ gallery:</h2>
  <div class="test-grid">
    <div class="test-item">
      <h3>Rabbit Photo 1</h3>
      <picture>
        <source type="image/webp" srcset="gallery/photo_1_2025-09-28_18-05-40.webp">
        <img src="gallery/photo_1_2025-09-28_18-05-40.jpg" alt="Rabbit 1" width="200" height="150" loading="lazy">
      </picture>
      <p>WebP vs JPEG —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</p>
    </div>
    
    <div class="test-item">
      <h3>Media Test</h3>
      <picture>
        <source type="image/webp" srcset="assets/media/rabbit-photo-1.webp">
        <img src="assets/media/rabbit-photo-1.jpg" alt="Media Test" width="200" height="150" loading="lazy">
      </picture>
      <p>Media WebP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</p>
    </div>
  </div>
  
  <h2>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ:</h2>
  <div id="load-info">
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è</p>
    <ul>
      <li><strong>Chrome/Firefox/Edge/Safari 14+:</strong> –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å .webp —Ñ–∞–π–ª—ã</li>
      <li><strong>IE11/—Å—Ç–∞—Ä—ã–π Safari:</strong> –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å .png/.jpg —Ñ–∞–π–ª—ã</li>
    </ul>
  </div>
  
  <script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebP
    function checkWebPSupport() {
      return new Promise((resolve) => {
        const webP = new Image();
        webP.onload = webP.onerror = function () {
          resolve(webP.height === 2);
        };
        webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
      });
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', async () => {
      const isWebPSupported = await checkWebPSupport();
      const statusEl = document.getElementById('webp-status');
      
      if (isWebPSupported) {
        statusEl.innerHTML = '‚úÖ WebP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è! –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è';
        statusEl.className = 'status green';
      } else {
        statusEl.innerHTML = '‚ùå WebP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ PNG/JPEG';
        statusEl.className = 'status red';
      }
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–∞—É–∑–µ—Ä–µ
      const browserInfo = `
        <p><strong>–ë—Ä–∞—É–∑–µ—Ä:</strong> ${navigator.userAgent}</p>
        <p><strong>WebP –ø–æ–¥–¥–µ—Ä–∂–∫–∞:</strong> ${isWebPSupported ? '–î–∞' : '–ù–µ—Ç'}</p>
      `;
      document.getElementById('load-info').insertAdjacentHTML('beforeend', browserInfo);
    });
  </script>
</body>
</html>