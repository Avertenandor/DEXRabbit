<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dropdown Test - DEXRabbit</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: Arial, sans-serif; 
      background: #0a0e1a;
      color: white;
      padding: 20px;
    }

    .test-info {
      background: #1a1e2a;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .nav-beautiful__dropdown-wrapper {
      margin: 20px 0;
      border: 2px solid #2a2e3a;
      border-radius: 8px;
      padding: 10px;
    }

    .nav-beautiful__btn {
      width: 100%;
      padding: 15px;
      background: #2a3a5a;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-beautiful__btn:hover {
      background: #3a4a6a;
    }

    .nav-beautiful__arrow {
      display: inline-block;
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 6px solid currentColor;
      transition: transform 0.3s ease;
    }

    .nav-beautiful__dropdown-wrapper.open .nav-beautiful__arrow {
      transform: rotate(180deg);
    }

    .nav-beautiful__dropdown {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: max-height 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s;
      margin-top: 10px;
      background: #1a2a3a;
      border-radius: 6px;
    }

    .nav-beautiful__dropdown-wrapper.open .nav-beautiful__dropdown {
      max-height: 1000px;
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
      transition: max-height 0.3s ease, opacity 0.3s ease, visibility 0s linear 0s;
    }

    .nav-beautiful__dropdown-list {
      list-style: none;
      padding: 10px;
    }

    .nav-beautiful__dropdown-item {
      padding: 12px;
      display: block;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      margin: 5px 0;
      background: #2a3a4a;
    }

    .nav-beautiful__dropdown-item:hover {
      background: #3a4a5a;
    }

    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-family: monospace;
    }

    .status.success { background: #2a4a2a; color: #8afa8a; }
    .status.error { background: #4a2a2a; color: #fa8a8a; }
    .status.info { background: #2a3a4a; color: #8acafa; }
  </style>
</head>
<body>
  <div class="test-info">
    <h1>üß™ Dropdown Test Page</h1>
    <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ dropdown –¥–ª—è DEXRabbit</p>
    <div id="status"></div>
  </div>

  <!-- TEST 1: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ -->
  <div class="nav-beautiful__dropdown-wrapper" data-test="test1">
    <button class="nav-beautiful__btn">
      –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
      <span class="nav-beautiful__arrow"></span>
    </button>
    <div class="nav-beautiful__dropdown">
      <ul class="nav-beautiful__dropdown-list">
        <li><a href="#" class="nav-beautiful__dropdown-item">üí∞ –ú–æ–¥–µ–ª—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üöÄ –°—Ç–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏–∏</a></li>
      </ul>
    </div>
  </div>

  <!-- TEST 2: –ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ -->
  <div class="nav-beautiful__dropdown-wrapper" data-test="test2">
    <button class="nav-beautiful__btn">
      –ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ
      <span class="nav-beautiful__arrow"></span>
    </button>
    <div class="nav-beautiful__dropdown">
      <ul class="nav-beautiful__dropdown-list">
        <li><a href="#" class="nav-beautiful__dropdown-item">ü§ù –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üìç –û—Ñ–∏—Å –≤ –ë–µ–ª–∞—Ä—É—Å–∏</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üìà –ë–ª–æ–≥–≥–µ—Ä–∞–º</a></li>
      </ul>
    </div>
  </div>

  <!-- TEST 3: –£—Å–ª—É–≥–∏ -->
  <div class="nav-beautiful__dropdown-wrapper" data-test="test3">
    <button class="nav-beautiful__btn">
      –£—Å–ª—É–≥–∏
      <span class="nav-beautiful__arrow"></span>
    </button>
    <div class="nav-beautiful__dropdown">
      <ul class="nav-beautiful__dropdown-list">
        <li><a href="#" class="nav-beautiful__dropdown-item">üê∞ –ü–æ–∫—É–ø–∫–∞ –∫—Ä–æ–ª–∏–∫–æ–≤</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üì¶ –î–æ—Å—Ç–∞–≤–∫–∞</a></li>
        <li><a href="#" class="nav-beautiful__dropdown-item">üè° –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</a></li>
      </ul>
    </div>
  </div>

  <script>
    const statusDiv = document.getElementById('status');
    
    function log(message, type = 'info') {
      const p = document.createElement('div');
      p.className = `status ${type}`;
      p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      statusDiv.appendChild(p);
      console.log(message);
    }

    log('üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...', 'info');

    // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ dropdown wrappers
    const dropdownWrappers = document.querySelectorAll('.nav-beautiful__dropdown-wrapper');
    log(`–ù–∞–π–¥–µ–Ω–æ dropdown wrappers: ${dropdownWrappers.length}`, dropdownWrappers.length > 0 ? 'success' : 'error');

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    dropdownWrappers.forEach((wrapper, index) => {
      const btn = wrapper.querySelector('.nav-beautiful__btn');
      const dropdown = wrapper.querySelector('.nav-beautiful__dropdown');
      const testId = wrapper.getAttribute('data-test');
      
      if (!btn) {
        log(`‚ùå –ö–Ω–æ–ø–∫–∞ –ù–ï –ù–ê–ô–î–ï–ù–ê –≤ wrapper ${index + 1}`, 'error');
        return;
      }
      
      if (!dropdown) {
        log(`‚ùå Dropdown –ù–ï –ù–ê–ô–î–ï–ù –≤ wrapper ${index + 1}`, 'error');
        return;
      }

      log(`‚úÖ Wrapper ${index + 1} (${testId}): –∫–Ω–æ–ø–∫–∞ –∏ dropdown –Ω–∞–π–¥–µ–Ω—ã`, 'success');

      btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const wasOpen = wrapper.classList.contains('open');
        
        log(`üñ±Ô∏è –ö–õ–ò–ö –Ω–∞ "${testId}": ${wasOpen ? '–ó–ê–ö–†–´–í–ê–ï–ú' : '–û–¢–ö–†–´–í–ê–ï–ú'}`, 'info');
        
        // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –¥—Ä—É–≥–∏–µ
        dropdownWrappers.forEach(other => {
          if (other !== wrapper) {
            other.classList.remove('open');
          }
        });
        
        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π
        if (wasOpen) {
          wrapper.classList.remove('open');
          log(`üì¶ ${testId}: –∫–ª–∞—Å—Å .open –£–î–ê–õ–ï–ù`, 'success');
        } else {
          wrapper.classList.add('open');
          log(`üì¶ ${testId}: –∫–ª–∞—Å—Å .open –î–û–ë–ê–í–õ–ï–ù`, 'success');
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ computed styles
          setTimeout(() => {
            const computedStyle = window.getComputedStyle(dropdown);
            log(`üìä ${testId} Computed Styles:`, 'info');
            log(`   max-height: ${computedStyle.maxHeight}`, 'info');
            log(`   opacity: ${computedStyle.opacity}`, 'info');
            log(`   visibility: ${computedStyle.visibility}`, 'info');
            log(`   pointer-events: ${computedStyle.pointerEvents}`, 'info');
            log(`   overflow: ${computedStyle.overflow}`, 'info');
          }, 50);
        }
      });
    });

    log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success');
    log('üìù –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π dropdown –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'info');
  </script>
</body>
</html>