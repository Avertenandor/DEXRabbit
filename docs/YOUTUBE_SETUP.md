# Настройка раздела YouTube

Этот документ содержит инструкции по настройке раздела YouTube на сайте.

## Обзор

Раздел YouTube автоматически загружает и отображает последние видео с вашего канала YouTube в виде красивых карточек. Раздел поддерживает:

- ✅ Автоматическую загрузку последних 6 видео
- ✅ Красивое отображение с превью, длительностью и количеством просмотров
- ✅ Мобильную адаптацию
- ✅ Fallback режим (встроенный плейлист), если API не настроен
- ✅ Кэширование для уменьшения количества запросов

## Быстрый старт (без API ключа)

По умолчанию раздел работает в fallback режиме и показывает встроенный YouTube плейлист. Это работает сразу без настройки API ключа.

## Настройка YouTube Data API v3 (рекомендуется)

Для полной функциональности с автоматической загрузкой видео в виде карточек нужно настроить YouTube Data API v3.

### Шаг 1: Получение API ключа

1. **Перейдите в Google Cloud Console**
   - Откройте https://console.cloud.google.com/

2. **Создайте проект (или выберите существующий)**
   - Нажмите на выпадающий список проектов вверху страницы
   - Нажмите "New Project"
   - Введите название проекта (например, "DexRabbit Website")
   - Нажмите "Create"

3. **Включите YouTube Data API v3**
   - В боковом меню выберите "APIs & Services" → "Library"
   - Найдите "YouTube Data API v3"
   - Нажмите на него и затем нажмите "Enable"

4. **Создайте API ключ**
   - В боковом меню выберите "APIs & Services" → "Credentials"
   - Нажмите "Create Credentials" → "API key"
   - Скопируйте сгенерированный API ключ

5. **Настройте ограничения (рекомендуется для безопасности)**
   - Нажмите на созданный API ключ для редактирования
   - В разделе "Application restrictions" выберите "HTTP referrers (web sites)"
   - Добавьте ваш домен (например, `https://dexrabbit.com/*`)
   - В разделе "API restrictions" выберите "Restrict key"
   - Выберите только "YouTube Data API v3"
   - Сохраните изменения

### Шаг 2: Настройка на сайте

1. **Откройте файл конфигурации**
   ```
   /assets/js/youtube-config.js
   ```

2. **Замените API ключ**
   Найдите строку:
   ```javascript
   API_KEY: 'YOUR_YOUTUBE_API_KEY_HERE',
   ```

   Замените на ваш реальный ключ:
   ```javascript
   API_KEY: 'AIzaSyDjH8vQP0Z3kX5xL8tY6mN4wR2eP1bC9dE',
   ```

3. **(Опционально) Укажите ID канала напрямую**
   Если вы знаете ID вашего канала (начинается с `UC...`), можете указать его:
   ```javascript
   CHANNEL_ID: 'UCxxxxxxxxxxxxxxxxx',
   ```

   Иначе оставьте пустым - ID будет определен автоматически по handle:
   ```javascript
   CHANNEL_HANDLE: '@DexRabbitFarm',
   ```

4. **Сохраните файл и обновите сайт**

## Настройки конфигурации

В файле `/assets/js/youtube-config.js` доступны следующие параметры:

| Параметр | Описание | Значение по умолчанию |
|----------|----------|----------------------|
| `API_KEY` | YouTube Data API v3 ключ | `'YOUR_YOUTUBE_API_KEY_HERE'` |
| `CHANNEL_ID` | ID канала (опционально) | `''` (пусто) |
| `CHANNEL_HANDLE` | Handle канала (например, @DexRabbitFarm) | `'@DexRabbitFarm'` |
| `MAX_RESULTS` | Количество видео для отображения | `6` |
| `CACHE_DURATION` | Время кэширования в мс | `300000` (5 минут) |

## Как найти ID вашего канала

Если вы хотите указать `CHANNEL_ID` напрямую:

1. Откройте ваш канал на YouTube
2. В адресной строке найдите строку вида:
   - `youtube.com/channel/UCxxxxxxxxxxxxxxxxx` - это и есть ваш ID
   - Если у вас custom URL (`youtube.com/@YourName`), ID можно найти:
     - Откройте исходный код страницы (Ctrl+U)
     - Найдите `"channelId"` или `"externalId"`

## Квоты и лимиты API

YouTube Data API v3 имеет дневные квоты:
- **Бесплатный лимит**: 10,000 единиц в день
- Наш запрос использует примерно 3-4 единицы на загрузку
- С кэшированием в 5 минут это примерно 288 запросов в день = ~864-1152 единиц

**Рекомендации для экономии квот:**
1. Увеличьте `CACHE_DURATION` до 10-15 минут
2. Уменьшите `MAX_RESULTS` если не нужно 6 видео
3. Используйте CDN для кэширования страницы

## Безопасность

⚠️ **Важно для production:**

API ключ находится в публичном JS файле, что может быть небезопасно для больших проектов. Для production рекомендуется:

1. **Использовать backend proxy:**
   - Создайте серверный endpoint (Node.js, Python, PHP)
   - Храните API ключ на сервере
   - Клиент обращается к вашему endpoint, а не напрямую к YouTube API

2. **Настроить ограничения API ключа:**
   - Ограничьте по домену (HTTP referrers)
   - Ограничьте только YouTube Data API v3
   - Установите дневной лимит запросов

## Troubleshooting

### Видео не загружаются

1. **Проверьте API ключ:**
   - Откройте консоль браузера (F12)
   - Проверьте наличие ошибок
   - Убедитесь что ключ скопирован правильно

2. **Проверьте квоты:**
   - Откройте Google Cloud Console
   - Перейдите в "APIs & Services" → "Dashboard"
   - Проверьте использование квот

3. **Проверьте настройки API:**
   - Убедитесь что YouTube Data API v3 включен
   - Проверьте ограничения ключа

### Fallback режим всегда активен

Убедитесь что:
1. API ключ правильно указан в `youtube-config.js`
2. Файл `youtube-config.js` загружается до `youtube-loader.js`
3. Нет ошибок в консоли браузера

## Структура файлов

```
assets/
├── css/
│   └── youtube-section.css      # Стили раздела YouTube
└── js/
    ├── youtube-config.js        # Конфигурация API (настраиваемый)
    └── youtube-loader.js        # Логика загрузки видео
```

## Поддержка

Если у вас возникли проблемы с настройкой:

1. Проверьте консоль браузера на ошибки
2. Убедитесь что все файлы подключены в index.html
3. Проверьте что API ключ активен и имеет доступ к YouTube Data API v3

## Лицензия

Этот код является частью проекта DEXRabbit и использует YouTube Data API v3 в соответствии с условиями использования Google.
