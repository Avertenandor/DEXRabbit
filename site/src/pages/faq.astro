---
import BaseLayout from '../layouts/BaseLayout.astro';

const faqData = [
    {
        question: "Что такое DEXRabbit?",
        answer: "DEXRabbit  это первая в мире токенизированная ферма кроликов. Мы позволяем инвесторам вкладываться в реальных животных и получать доход от их разведения, а также PLEX токены как дополнительную награду."
    },
    {
        question: "Какие гарантии вы даёте?",
        answer: "Мы гарантируем возврат вклада, но НЕ гарантируем прибыль. Все риски касаются только потенциального дохода. Возврат средств возможен в PLEX токенах или USDT при наличии ликвидности."
    },
    {
        question: "Можно ли посетить ферму?",
        answer: "Да! Посещение фермы возможно за PLEX токены с обязательным предварительным согласованием даты и времени. Необходимо соблюдать санитарные требования и не беспокоить животных без разрешения."
    },
    {
        question: "Как работает партнёрская программа?",
        answer: "Партнёрская программа предусматривает 3 уровня по 5% от вложений и прибыли рефералов. Выплаты происходят в два этапа: при вложениях реферала (до 3 дней) и при получении им прибыли (до 3 дней)."
    },
    {
        question: "Что такое PLEX токен?",
        answer: "PLEX  это токен нашей экосистемы в сети BSC. Инвесторы получают ежедневные PLEX токены как дополнение к основному доходу. Токен можно обменять на другие криптовалюты или использовать для оплаты услуг фермы."
    },
    {
        question: "Как происходит доставка кроликов?",
        answer: "Доставка осуществляется специализированным транспортом с соблюдением всех требований по перевозке животных. В Москве и МО  бесплатно, по России от 1500₽. Включает ветеринарные документы и консультации."
    },
    {
        question: "Что происходит с потомством?",
        answer: "Один кролик из каждого помёта направляется на улучшение породы. Фермер может выкупить ценных производителей по стартовой цене. Пара возвращается владельцу после 2-х успешных потомств."
    },
    {
        question: "Как отслеживать своих кроликов?",
        answer: "Мы ведём прозрачную отчётность 2 раза в день с видео и фото отчётами. Каждый кролик имеет персональную карточку с информацией о здоровье, кормлении и потомстве."
    }
];
---

<BaseLayout title="Часто задаваемые вопросы  DEXRabbit"
           description=" Ответы на частые вопросы о проекте DEXRabbit: гарантии, прибыль, PLEX токены, посещение фермы, партнёрская программа">
    
    <section class="section section-primary">
        <div class="container">
            <div class="section-header section-header-white">
                <h1 class="section-title"> Часто задаваемые вопросы</h1>
                <p class="section-description">
                    Всё, что вы хотели знать о DEXRabbit
                </p>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="faq-container">
                <div class="faq-intro">
                    <p>Не нашли ответ на свой вопрос? <a href="/contacts" class="contact-link">Свяжитесь с нами</a> через Telegram бот или задайте вопрос в нашей группе.</p>
                </div>

                <div class="faq-list">
                    {faqData.map((faq, index) => (
                        <div class="faq-item">
                            <button class="faq-question" data-faq={index}>
                                <span class="faq-question-text">{faq.question}</span>
                                <span class="faq-toggle">+</span>
                            </button>
                            <div class="faq-answer" data-answer={index}>
                                <div class="faq-answer-content">
                                    {faq.answer}
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section section-gray">
        <div class="container">
            <div class="faq-cta">
                <h2> Готовы присоединиться?</h2>
                <p>Начните с минимальной суммы и станьте частью токенизированной фермы</p>
                <div class="cta-buttons">
                    <a href="/investment-model" class="btn btn-primary">
                         Инвестировать
                    </a>
                    <a href="/contacts" class="btn btn-outline">
                         Задать вопрос
                    </a>
                </div>
            </div>
        </div>
    </section>

</BaseLayout>

<style>
.faq-container {
    max-width: 800px;
    margin: 0 auto;
}

.faq-intro {
    text-align: center;
    margin-bottom: 3rem;
    padding: 1.5rem;
    background: #e3f2fd;
    border-radius: 12px;
}

.contact-link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
}

.contact-link:hover {
    text-decoration: underline;
}

.faq-list {
    space-y: 1rem;
}

.faq-item {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 1rem;
    overflow: hidden;
    transition: all 0.3s ease;
}

.faq-item:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

.faq-question {
    width: 100%;
    padding: 1.5rem;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    transition: all 0.3s ease;
}

.faq-question:hover {
    background: #f8f9fa;
}

.faq-question-text {
    flex: 1;
    padding-right: 1rem;
}

.faq-toggle {
    font-size: 1.5rem;
    font-weight: 300;
    color: var(--color-primary);
    transition: transform 0.3s ease;
    min-width: 24px;
    text-align: center;
}

.faq-item.active .faq-toggle {
    transform: rotate(45deg);
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.faq-item.active .faq-answer {
    max-height: 500px;
}

.faq-answer-content {
    padding: 0 1.5rem 1.5rem 1.5rem;
    color: #666;
    line-height: 1.6;
}

.faq-cta {
    text-align: center;
    padding: 3rem;
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
}

.faq-cta h2 {
    margin-bottom: 1rem;
    color: var(--color-primary);
}

.faq-cta p {
    margin-bottom: 2rem;
    color: #666;
    font-size: 1.1rem;
}

.cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

@media (max-width: 768px) {
    .faq-question {
        padding: 1rem;
        font-size: 1rem;
    }
    
    .faq-answer-content {
        padding: 0 1rem 1rem 1rem;
    }
    
    .cta-buttons {
        flex-direction: column;
        align-items: center;
        max-width: 300px;
        margin: 0 auto;
    }
}
</style>

<script>
class FAQManager {
    constructor() {
        this.init();
    }

    init() {
        // Обработчики для вопросов
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', (e) => {
                this.toggleFAQ(e.target.closest('.faq-question'));
            });
        });

        // Поиск по URL hash
        this.handleHashNavigation();
    }

    toggleFAQ(questionButton) {
        const faqItem = questionButton.closest('.faq-item');
        const isActive = faqItem.classList.contains('active');
        
        // Закрываем все остальные FAQ
        document.querySelectorAll('.faq-item.active').forEach(item => {
            if (item !== faqItem) {
                item.classList.remove('active');
            }
        });

        // Переключаем текущий FAQ
        if (isActive) {
            faqItem.classList.remove('active');
        } else {
            faqItem.classList.add('active');
            
            // Плавная прокрутка к вопросу
            setTimeout(() => {
                faqItem.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 300);
        }

        // Аналитика
        if (window.analytics && typeof window.analytics.trackEvent === 'function') {
            const questionText = questionButton.querySelector('.faq-question-text').textContent;
            window.analytics.trackEvent('faq_toggled', {
                question: questionText,
                action: isActive ? 'closed' : 'opened',
                timestamp: Date.now()
            });
        }
    }

    handleHashNavigation() {
        const hash = window.location.hash;
        if (hash && hash.startsWith('#faq-')) {
            const faqIndex = parseInt(hash.replace('#faq-', ''));
            const faqItem = document.querySelector([data-faq=""])?.closest('.faq-item');
            
            if (faqItem) {
                setTimeout(() => {
                    faqItem.classList.add('active');
                    faqItem.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 500);
            }
        }
    }
}

// Инициализация FAQ
document.addEventListener('DOMContentLoaded', () => {
    new FAQManager();
});

// Аналитика просмотра FAQ
if (window.analytics && typeof window.analytics.trackEvent === 'function') {
    window.analytics.trackEvent('faq_page_view', {
        total_questions: 8,
        timestamp: Date.now()
    });
}
</script>
