---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Логистика и регионы  DEXRabbit"
           description=" Доставка кроликов и продукции по регионам: условия транспортировки, стоимость, сроки, работа с партнёрами по доставке">
    
    <section class="section section-primary">
        <div class="container">
            <div class="section-header section-header-white">
                <h1 class="section-title"> Логистика и регионы</h1>
                <p class="section-description">
                    Доставка по России с заботой о животных
                </p>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="delivery-zones">
                <h2> Зоны доставки</h2>
                
                <div class="zones-grid">
                    <div class="zone-card priority">
                        <h3> Приоритетная зона</h3>
                        <div class="zone-price">Бесплатная доставка</div>
                        <p class="zone-description">Москва и Московская область (в радиусе 100 км от фермы)</p>
                        <ul>
                            <li> Доставка в день заказа</li>
                            <li> Личный контроль качества</li>
                            <li> Консультация на месте</li>
                        </ul>
                    </div>
                    
                    <div class="zone-card">
                        <h3> Центральная Россия</h3>
                        <div class="zone-price">от 1 500 ₽</div>
                        <p class="zone-description">Тверь, Калуга, Рязань, Тула, Владимир, Ярославль</p>
                        <ul>
                            <li> Доставка 1-2 дня</li>
                            <li> Специальный транспорт</li>
                            <li> Ветеринарное сопровождение</li>
                        </ul>
                    </div>
                    
                    <div class="zone-card">
                        <h3> Вся Россия</h3>
                        <div class="zone-price">от 3 000 ₽</div>
                        <p class="zone-description">Доставка по всей территории РФ</p>
                        <ul>
                            <li> Авиа и ж/д доставка</li>
                            <li> Полный пакет документов</li>
                            <li> Страхование груза</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section section-gray">
        <div class="container">
            <div class="delivery-info">
                <div class="info-grid">
                    <div class="info-card">
                        <h3> Что включает доставка</h3>
                        <ul>
                            <li>Специальные переноски для животных</li>
                            <li>Ветеринарные документы</li>
                            <li>Корм на первые дни</li>
                            <li>Инструкция по адаптации</li>
                            <li>Контакт куратора для консультаций</li>
                        </ul>
                    </div>
                    
                    <div class="info-card">
                        <h3> Условия транспортировки</h3>
                        <ul>
                            <li>Температурный контроль</li>
                            <li>Минимальный стресс для животных</li>
                            <li>Остановки для кормления и воды</li>
                            <li>Постоянный мониторинг состояния</li>
                            <li>Страхование жизни и здоровья</li>
                        </ul>
                    </div>
                    
                    <div class="info-card">
                        <h3> Партнёры по доставке</h3>
                        <ul>
                            <li>Специализированные зоологические службы</li>
                            <li>Авиакомпании с карго отделениями</li>
                            <li>Железнодорожные перевозки животных</li>
                            <li>Курьерские службы для аксессуаров</li>
                            <li>Региональные представители</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="delivery-calculator">
                <h2> Калькулятор доставки</h2>
                <form id="delivery-calc" class="calc-form">
                    <div class="calc-grid">
                        <div class="form-group">
                            <label for="from-city">Откуда</label>
                            <input type="text" id="from-city" value="Подольск, МО" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="to-city">Куда (город) *</label>
                            <input type="text" id="to-city" name="to-city" placeholder="Введите город" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="delivery-type">Тип доставки</label>
                            <select id="delivery-type" name="delivery-type">
                                <option value="standard">Стандартная</option>
                                <option value="express">Экспресс</option>
                                <option value="premium">Премиум (с сопровождением)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="animal-count">Количество животных</label>
                            <input type="number" id="animal-count" name="animal-count" value="1" min="1" max="10">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                         Рассчитать стоимость
                    </button>
                </form>
                
                <div id="delivery-result" class="calc-result" style="display:none;">
                    <h3> Результат расчёта</h3>
                    <div class="result-details"></div>
                </div>
            </div>
        </div>
    </section>

</BaseLayout>

<style>
.zones-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 1.5rem;
}

.zone-card {
    background: white;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.zone-card:hover {
    transform: translateY(-4px);
}

.zone-card.priority {
    border: 2px solid #4caf50;
    background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
    color: white;
}

.zone-card h3 {
    margin-bottom: 1rem;
}

.zone-price {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--color-primary);
}

.zone-card.priority .zone-price {
    color: white;
}

.zone-description {
    margin-bottom: 1rem;
    font-style: italic;
}

.zone-card ul {
    list-style: none;
    padding: 0;
}

.zone-card li {
    margin-bottom: 0.5rem;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.info-card {
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.info-card h3 {
    margin-bottom: 1rem;
    color: var(--color-primary);
}

.info-card ul {
    list-style: none;
    padding: 0;
}

.info-card li {
    margin-bottom: 0.75rem;
    padding-left: 1.5rem;
    position: relative;
}

.info-card li::before {
    content: "";
    position: absolute;
    left: 0;
    color: var(--color-primary);
}

.delivery-calculator {
    max-width: 800px;
    margin: 0 auto;
}

.calc-form {
    background: white;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
}

.calc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
}

.calc-result {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 12px;
    border-left: 4px solid var(--color-primary);
}

.result-details {
    margin-top: 1rem;
}

@media (max-width: 768px) {
    .calc-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
document.getElementById('delivery-calc').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const toCity = formData.get('to-city');
    const deliveryType = formData.get('delivery-type');
    const animalCount = parseInt(formData.get('animal-count'));
    
    // Примерный расчёт стоимости (в реальности - API к службе доставки)
    let baseCost = 1500;
    
    // Коэффициенты для типа доставки
    const typeMultipliers = {
        'standard': 1,
        'express': 1.5,
        'premium': 2.5
    };
    
    // Коэффициент за дополнительных животных
    const animalMultiplier = 1 + (animalCount - 1) * 0.3;
    
    const totalCost = Math.round(baseCost * typeMultipliers[deliveryType] * animalMultiplier);
    const estimatedDays = deliveryType === 'express' ? 1 : deliveryType === 'premium' ? 1 : 2;
    
    // Показать результат
    const resultDiv = document.getElementById('delivery-result');
    const detailsDiv = resultDiv.querySelector('.result-details');
    
    detailsDiv.innerHTML = 
        <div class="result-item">
            <strong>Направление:</strong> Подольск  
        </div>
        <div class="result-item">
            <strong>Тип доставки:</strong> 
        </div>
        <div class="result-item">
            <strong>Количество животных:</strong> 
        </div>
        <div class="result-item">
            <strong>Ориентировочная стоимость:</strong> <span style="color: var(--color-primary); font-weight: 600;"> ₽</span>
        </div>
        <div class="result-item">
            <strong>Срок доставки:</strong>  
        </div>
        <div style="margin-top: 1rem; padding: 1rem; background: #e3f2fd; border-radius: 8px;">
            <small> Точная стоимость рассчитывается индивидуально с учётом всех факторов. Для уточнения свяжитесь с нашими менеджерами.</small>
        </div>
    ;
    
    resultDiv.style.display = 'block';
    
    // Аналитика
    if (window.analytics && typeof window.analytics.trackEvent === 'function') {
        window.analytics.trackEvent('delivery_calculated', {
            to_city: toCity,
            delivery_type: deliveryType,
            animal_count: animalCount,
            estimated_cost: totalCost
        });
    }
});

// Аналитика просмотра страницы
if (window.analytics && typeof window.analytics.trackEvent === 'function') {
    window.analytics.trackEvent('logistics_page_view', {
        page: 'logistics',
        timestamp: Date.now()
    });
}
</script>
